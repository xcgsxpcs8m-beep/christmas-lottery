<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä¸€é€±å¹´ç¦®ç‰©å¤§æŠ½ç</title>

<style>
body{
  margin:0;
  font-family:"PingFang TC","Segoe UI",sans-serif;
  background:linear-gradient(180deg,#ffd6e5,#dbeeff);
  color:#4a4a4a;
  overflow:hidden;
}

.container{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:20px;
  position:relative;
  z-index:2;
}

h1{font-size:1.7em;margin-bottom:6px;}
.days{font-size:.95em;margin-bottom:20px;opacity:.8;}

.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:14px;
  max-width:330px;width:100%;
}

.cell{
  height:85px;border-radius:18px;background:#fff;
  box-shadow:0 6px 15px rgba(0,0,0,.06);
}

.cell.active{
  background:linear-gradient(145deg,#ffe6f0,#e9f3ff);
  box-shadow:0 0 18px rgba(180,200,255,.9);
}

button{
  margin-top:22px;padding:14px 36px;
  border-radius:30px;border:none;background:#fff;
  font-weight:bold;cursor:pointer;
}

button:disabled{opacity:.5;}
.result{margin-top:18px;font-size:1.05em;line-height:1.6;}

.footer{
  position:absolute;bottom:10px;
  font-size:.7em;opacity:.5;
}

/* hearts */
.heart{
  position:fixed;top:-10px;color:#ff9ab5;
  animation:fall linear infinite;z-index:1;
}
@keyframes fall{to{transform:translateY(110vh);}}

/* overlay */
.overlay{
  position:fixed;inset:0;
  background:rgba(255,255,255,.9);
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:10;
}

.overlay img{
  width:70%;max-width:260px;
  border-radius:16px;
  margin-bottom:16px;
}

.card{
  background:#fff;
  padding:20px;
  border-radius:18px;
  width:80%;
  max-width:300px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
  font-size:.95em;
  line-height:1.6;
}

.card button{
  margin-top:14px;
}
</style>
</head>

<body>

<div class="container">
  <h1>ä¸€é€±å¹´ç¦®ç‰©å¤§æŠ½ç ğŸ’</h1>
  <div class="days" id="days"></div>

  <div class="grid" id="grid"></div>
  <button id="btn" onclick="start()">é–‹å§‹æŠ½ç</button>

  <div class="result" id="result"></div>
  <div class="footer">Luo & Wei Â· Happy 1st Anniversary!</div>
</div>

<!-- ç¬¬ä¸‰æŠ½ç”¨ -->
<div class="overlay" id="overlay">
  <img src="IMG_5656.jpeg">
  <div class="card">
    <div id="cardText"></div>
    <button onclick="showPrize()">ç¹¼çºŒ</button>
  </div>
</div>

<script>
const START_DATE="2025-02-05";

const CARD_TEXT=`è¬è¬ä½ èµ°åˆ°ä»Šå¤©ã€‚
é€™ä¸€å¹´æœ‰å¿«æ¨‚ã€æœ‰åµæ¶ï¼Œ
ä½†æ›´å¤šçš„æ˜¯ã€Œé‚„å¥½èº«é‚Šæ˜¯ä½ ã€ã€‚`;

const PRIZES={
A:{gift:"ç¦®ç‰© A",message:"è¬è¬ä½ é¸æ“‡æˆ‘ã€‚"},
B:{gift:"ç¦®ç‰© B",message:"ä½ è®“å¹³å‡¡è®Šå¾—å€¼å¾—ã€‚"},
C:{gift:"ç¦®ç‰© C",message:"æ—¥å­å› ä½ è€Œæº«æŸ”ã€‚"},
D:{gift:"ç¦®ç‰© D",message:"é€™ä»½ç¦®ç‰©ï¼Œä»£è¡¨æˆ‘æƒ³é™ªä½ å¾ˆä¹…ã€‚"},
E:{gift:"ç¦®ç‰© E",message:"ä½ æ˜¯æˆ‘çš„å®‰å¿ƒã€‚"},
F:{gift:"ç¦®ç‰© F",message:"æœªä¾†ä¹Ÿä¸€èµ·èµ°ã€‚"}
};

const days=document.getElementById("days");
days.innerText=`å·²åœ¨ä¸€èµ· ${Math.floor((new Date()-new Date(START_DATE))/(86400000))} å¤© ğŸ’`;

const grid=document.getElementById("grid");
const result=document.getElementById("result");
const btn=document.getElementById("btn");
const overlay=document.getElementById("overlay");
const cardText=document.getElementById("cardText");

let cells=[],times=0,finalPrize=null;
for(let i=0;i<6;i++){
  const d=document.createElement("div");
  d.className="cell";grid.appendChild(d);cells.push(d);
}

function start(){
  if(times>=3)return;
  times++;result.innerHTML="";
  let i=0,c=0,total=Math.random()*20+20;

  const t=setInterval(()=>{
    cells.forEach(x=>x.classList.remove("active"));
    cells[i%6].classList.add("active");i++;c++;
    if(c>total){
      clearInterval(t);
      if(navigator.vibrate)navigator.vibrate([200,100,200]);

      if(times===3){
        finalPrize=PRIZES.D;
        cardText.innerText=CARD_TEXT;
        overlay.style.display="flex";
        btn.disabled=true;
      }else{
        const pool=["A","B","C","E","F"];
        const p=PRIZES[pool[Math.floor(Math.random()*pool.length)]];
        result.innerHTML=`ğŸ ${p.gift}<br>ğŸ’Œ ${p.message}`;
      }
    }
  },90);
}

function showPrize(){
  overlay.style.display="none";
  result.innerHTML=`ğŸ ${finalPrize.gift}<br>ğŸ’Œ ${finalPrize.message}`;
}

// hearts
setInterval(()=>{
  const h=document.createElement("div");
  h.className="heart";h.innerText="â™¥";
  h.style.left=Math.random()*100+"vw";
  h.style.fontSize=(Math.random()*10+10)+"px";
  h.style.animationDuration=(Math.random()*3+4)+"s";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),7000);
},300);
</script>

</body>
</html>
